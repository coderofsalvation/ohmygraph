require=function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){},{}],2:[function(require,module,exports){"use strict";function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}module.exports=function(qs,sep,eq,options){sep=sep||"&";eq=eq||"=";var obj={};if(typeof qs!=="string"||qs.length===0){return obj}var regexp=/\+/g;qs=qs.split(sep);var maxKeys=1e3;if(options&&typeof options.maxKeys==="number"){maxKeys=options.maxKeys}var len=qs.length;if(maxKeys>0&&len>maxKeys){len=maxKeys}for(var i=0;i<len;++i){var x=qs[i].replace(regexp,"%20"),idx=x.indexOf(eq),kstr,vstr,k,v;if(idx>=0){kstr=x.substr(0,idx);vstr=x.substr(idx+1)}else{kstr=x;vstr=""}k=decodeURIComponent(kstr);v=decodeURIComponent(vstr);if(!hasOwnProperty(obj,k)){obj[k]=v}else if(isArray(obj[k])){obj[k].push(v)}else{obj[k]=[obj[k],v]}}return obj};var isArray=Array.isArray||function(xs){return Object.prototype.toString.call(xs)==="[object Array]"}},{}],3:[function(require,module,exports){"use strict";var stringifyPrimitive=function(v){switch(typeof v){case"string":return v;case"boolean":return v?"true":"false";case"number":return isFinite(v)?v:"";default:return""}};module.exports=function(obj,sep,eq,name){sep=sep||"&";eq=eq||"=";if(obj===null){obj=undefined}if(typeof obj==="object"){return map(objectKeys(obj),function(k){var ks=encodeURIComponent(stringifyPrimitive(k))+eq;if(isArray(obj[k])){return map(obj[k],function(v){return ks+encodeURIComponent(stringifyPrimitive(v))}).join(sep)}else{return ks+encodeURIComponent(stringifyPrimitive(obj[k]))}}).join(sep)}if(!name)return"";return encodeURIComponent(stringifyPrimitive(name))+eq+encodeURIComponent(stringifyPrimitive(obj))};var isArray=Array.isArray||function(xs){return Object.prototype.toString.call(xs)==="[object Array]"};function map(xs,f){if(xs.map)return xs.map(f);var res=[];for(var i=0;i<xs.length;i++){res.push(f(xs[i],i))}return res}var objectKeys=Object.keys||function(obj){var res=[];for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))res.push(key)}return res}},{}],4:[function(require,module,exports){"use strict";exports.decode=exports.parse=require("./decode");exports.encode=exports.stringify=require("./encode")},{"./decode":2,"./encode":3}],5:[function(require,module,exports){(function(__dirname){(function(){var expr,fs,request;fs=typeof window==="undefined"||window===null?require("fs"):false;request=fs&&fs.existsSync(__dirname+"/../sync-request")?require("sync-request"):false;expr=require("property-expr");module.exports=function(){this.cache={};this.extendtoken="$extend";this.reftoken="$ref";this.pathtoken="#";this.debug=false;this.clone=function(obj){var key,temp;if(obj===null||typeof obj!=="object"||typeof obj==="function"){return obj}temp=obj.constructor();for(key in obj){temp[key]=this.clone(obj[key])}return temp};this.findIds=function(json,ids){var id,k,obj,v;id=false;obj={};for(k in json){v=json[k];if(json.id!=null){id=json.id}if(id&&k!=="id"){obj[k]=v}if(typeof v==="object"){this.findIds(v,ids)}}if(id){return ids[id]=obj}};this.get_json_pointer=function(ref,root){var err,error,evalstr,result;evalstr=ref.replace(/\\\//,"#SLASH#").replace(/\//g,".").replace(/#SLASH#/,"/");evalstr=evalstr.replace(new RegExp("^"+this.pathtoken),"");if(evalstr[0]==="."){evalstr=evalstr.substr(1,evalstr.length-1)}try{if(this.debug){console.log("evaluating '"+evalstr+"'")}result=expr.getter(evalstr)(root)}catch(error){err=error;result=""}return result};this.replace=function(json,ids,root){var jsonpointer,k,ref,ref1,ref2,results,str,v;results=[];for(k in json){v=json[k];if(this.debug&&typeof ref==="string"){console.log("checking "+k)}if(v!=null&&v[reftoken]!=null){ref=v[reftoken];if(this.debug&&typeof ref==="string"){console.log("checking "+k+" -> "+ref)}if(Object.keys(v).length>1){console.error("json-ref-lite error: object '"+k+"' contains reference as well as other properties..ignoring properties")}if(Array.isArray(ref)){ref=this.replace(ref,ids,root)}else if(ids[ref]!=null){json[k]=ids[ref]}else if(request&&String(ref).match(/^http/)){if(!this.cache[ref]){this.cache[ref]=JSON.parse(request("GET",ref).getBody().toString())}json[k]=this.cache[ref];if(ref.match(this.pathtoken)){jsonpointer=ref.replace(new RegExp(".*"+pathtoken),this.pathtoken);if(jsonpointer.length){json[k]=this.get_json_pointer(jsonpointer,json[k])}}}else if(fs&&fs.existsSync(ref)){str=fs.readFileSync(ref).toString();if(str.match(/module\.exports/)){json[k]=require(ref)}else{json[k]=JSON.parse(str)}}else if(String(ref).match(new RegExp("^"+this.pathtoken))){if(this.debug){console.log("checking "+ref+" pathtoken")}json[k]=this.get_json_pointer(ref,root)}if(((ref1=json[k])!=null?ref1.length:void 0)!=null&&((ref2=json[k])!=null?ref2.length:void 0)===0&&this.debug){results.push(console.log(ref+" reference not found"))}else{results.push(void 0)}}else{if(typeof v==="object"){results.push(this.replace(v,ids,root))}else{results.push(void 0)}}}return results};this.extend=function(json){var k,ref,results,rk,rv,v;if(typeof json==="object"){results=[];for(k in json){v=json[k];if(k===this.extendtoken&&v[this.reftoken]!=null){ref=this.get_json_pointer(v[this.reftoken],json);for(rk in v){rv=v[rk];if(rk!==this.reftoken){ref[rk]=rv}}delete json[k]}if(typeof v==="object"){results.push(v=this.extend(v))}else{results.push(void 0)}}return results}};this.resolve=function(json){var ids;ids={};this.findIds(json,ids);if(this.debug&&Object.keys(ids).length){console.dir(ids)}this.replace(json,ids,json);return json};this.evaluate=function(json,data,cb){var k,ref1,v;if(cb==null){cb=this.evaluateStr}ref1=this.clone(json);for(k in ref1){v=ref1[k];if(typeof v==="string"){json[k]=cb(v,data)}if(typeof v==="object"){json[k]=this.evaluate(v,data)}}return json};this.evaluateStr=function(k,data){var error,itemstr;if(typeof k!=="string"){return k}if(k[0]==="{"&&k[k.length-1]==="}"){try{return expr.getter(k.replace(/^{/,"").replace(/}$/,""))(data)}catch(error){return null}}else{itemstr=k.replace(/(\{)(.*?)(\})/g,function($0,$1,$2){var err,error1,result;result="";if(data==null||$2==null){return result}if(data[$2]!=null&&typeof data[$2]==="function"){result=data[$2]()}else{if(data[$2]!=null){result=data[$2]}else{try{$2=$2.replace(new RegExp("^"+this.pathtoken+"/"),"").replace(/\//g,".");result=expr.getter($2)(data)}catch(error1){err=error1;result=""}if(result==null){result=""}}}this.evaluateStr(result,data);return result});return itemstr}};return this}()}).call(this)}).call(this,"/node_modules/json-ref-lite")},{fs:1,"property-expr":6,"sync-request":1}],6:[function(require,module,exports){"use strict";var SPLIT_REGEX=/[^.^\]^[]+|(?=\[\]|\.\.)/g,DIGIT_REGEX=/^\d+$/;var setCache={},getCache={};module.exports={expr:expr,setter:function(path){return setCache[path]||(setCache[path]=new Function("data, value","return "+expr(path,"data")+" = value, data;"))},getter:function(path,safe){var k=path+"_"+safe;return getCache[k]||(getCache[k]=new Function("data","return "+expr(path,safe,"data")))},split:function(path){return path.match(SPLIT_REGEX)},join:function(segments){return segments.reduce(function(path,part){return path+(isQuoted(part)||DIGIT_REGEX.test(part)?"["+part+"]":(path?".":"")+part)},"")},forEach:function(path,cb,thisArg){forEach(path.match(SPLIT_REGEX),cb,thisArg)}};function expr(expression,safe,param){expression=expression||"";if(typeof safe==="string"){param=safe;safe=false}param=param||"data";if(expression&&expression.charAt(0)!=="[")expression="."+expression;return safe?makeSafe(expression,param):param+expression}function forEach(parts,iter,thisArg){var len=parts.length,part,idx,isArray,isBracket;for(idx=0;idx<len;idx++){part=parts[idx];if(part){isBracket=isQuoted(part);isArray=!isBracket&&/^\d+$/.test(part);iter.call(thisArg,part,isBracket,isArray,idx,parts)}}}function isQuoted(str){return typeof str==="string"&&str&&["'",'"'].indexOf(str.charAt(0))!==-1}function makeSafe(path,param){var result=param,parts=path.match(SPLIT_REGEX),isLast;forEach(parts,function(part,isBracket,isArray,idx,parts){isLast=idx===parts.length-1;part=isBracket||isArray?"["+part+"]":"."+part;result+=part+(!isLast?" || {})":")")});return new Array(parts.length+1).join("(")+result}},{}],7:[function(require,module,exports){(function(){"use strict";if(self.fetch){return}function normalizeName(name){if(typeof name!=="string"){name=String(name)}if(/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(name)){throw new TypeError("Invalid character in header field name")}return name.toLowerCase()}function normalizeValue(value){if(typeof value!=="string"){value=String(value)}return value}function Headers(headers){this.map={};if(headers instanceof Headers){headers.forEach(function(value,name){this.append(name,value)},this)}else if(headers){Object.getOwnPropertyNames(headers).forEach(function(name){this.append(name,headers[name])},this)}}Headers.prototype.append=function(name,value){name=normalizeName(name);value=normalizeValue(value);var list=this.map[name];if(!list){list=[];this.map[name]=list}list.push(value)};Headers.prototype["delete"]=function(name){delete this.map[normalizeName(name)]};Headers.prototype.get=function(name){var values=this.map[normalizeName(name)];return values?values[0]:null};Headers.prototype.getAll=function(name){return this.map[normalizeName(name)]||[]};Headers.prototype.has=function(name){return this.map.hasOwnProperty(normalizeName(name))};Headers.prototype.set=function(name,value){this.map[normalizeName(name)]=[normalizeValue(value)]};Headers.prototype.forEach=function(callback,thisArg){Object.getOwnPropertyNames(this.map).forEach(function(name){this.map[name].forEach(function(value){callback.call(thisArg,value,name,this)},this)},this)};function consumed(body){if(body.bodyUsed){return Promise.reject(new TypeError("Already read"))}body.bodyUsed=true}function fileReaderReady(reader){return new Promise(function(resolve,reject){reader.onload=function(){resolve(reader.result)};reader.onerror=function(){reject(reader.error)}})}function readBlobAsArrayBuffer(blob){var reader=new FileReader;reader.readAsArrayBuffer(blob);return fileReaderReady(reader)}function readBlobAsText(blob){var reader=new FileReader;reader.readAsText(blob);return fileReaderReady(reader)}var support={blob:"FileReader"in self&&"Blob"in self&&function(){try{new Blob;return true}catch(e){return false}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self};function Body(){this.bodyUsed=false;this._initBody=function(body){this._bodyInit=body;if(typeof body==="string"){this._bodyText=body}else if(support.blob&&Blob.prototype.isPrototypeOf(body)){this._bodyBlob=body}else if(support.formData&&FormData.prototype.isPrototypeOf(body)){this._bodyFormData=body}else if(!body){this._bodyText=""}else if(support.arrayBuffer&&ArrayBuffer.prototype.isPrototypeOf(body)){}else{throw new Error("unsupported BodyInit type")}};if(support.blob){this.blob=function(){var rejected=consumed(this);if(rejected){return rejected}if(this._bodyBlob){return Promise.resolve(this._bodyBlob)}else if(this._bodyFormData){throw new Error("could not read FormData body as blob")}else{return Promise.resolve(new Blob([this._bodyText]))}};this.arrayBuffer=function(){return this.blob().then(readBlobAsArrayBuffer)};this.text=function(){var rejected=consumed(this);if(rejected){return rejected}if(this._bodyBlob){return readBlobAsText(this._bodyBlob)}else if(this._bodyFormData){throw new Error("could not read FormData body as text")}else{return Promise.resolve(this._bodyText)}}}else{this.text=function(){var rejected=consumed(this);return rejected?rejected:Promise.resolve(this._bodyText)}}if(support.formData){this.formData=function(){return this.text().then(decode)}}this.json=function(){return this.text().then(JSON.parse)};return this}var methods=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function normalizeMethod(method){var upcased=method.toUpperCase();return methods.indexOf(upcased)>-1?upcased:method}function Request(input,options){options=options||{};var body=options.body;if(Request.prototype.isPrototypeOf(input)){if(input.bodyUsed){throw new TypeError("Already read")}this.url=input.url;this.credentials=input.credentials;if(!options.headers){this.headers=new Headers(input.headers)}this.method=input.method;this.mode=input.mode;if(!body){body=input._bodyInit;input.bodyUsed=true}}else{this.url=input}this.credentials=options.credentials||this.credentials||"omit";if(options.headers||!this.headers){this.headers=new Headers(options.headers)}this.method=normalizeMethod(options.method||this.method||"GET");this.mode=options.mode||this.mode||null;this.referrer=null;if((this.method==="GET"||this.method==="HEAD")&&body){throw new TypeError("Body not allowed for GET or HEAD requests")}this._initBody(body)}Request.prototype.clone=function(){return new Request(this)};function decode(body){var form=new FormData;body.trim().split("&").forEach(function(bytes){if(bytes){var split=bytes.split("=");var name=split.shift().replace(/\+/g," ");var value=split.join("=").replace(/\+/g," ");form.append(decodeURIComponent(name),decodeURIComponent(value))}});return form}function headers(xhr){var head=new Headers;var pairs=xhr.getAllResponseHeaders().trim().split("\n");pairs.forEach(function(header){var split=header.trim().split(":");var key=split.shift().trim();var value=split.join(":").trim();head.append(key,value)});return head}Body.call(Request.prototype);function Response(bodyInit,options){if(!options){options={}}this._initBody(bodyInit);this.type="default";this.status=options.status;this.ok=this.status>=200&&this.status<300;this.statusText=options.statusText;this.headers=options.headers instanceof Headers?options.headers:new Headers(options.headers);this.url=options.url||""}Body.call(Response.prototype);Response.prototype.clone=function(){return new Response(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Headers(this.headers),url:this.url})};Response.error=function(){var response=new Response(null,{status:0,statusText:""});response.type="error";return response};var redirectStatuses=[301,302,303,307,308];Response.redirect=function(url,status){if(redirectStatuses.indexOf(status)===-1){throw new RangeError("Invalid status code")}return new Response(null,{status:status,headers:{location:url}})};self.Headers=Headers;self.Request=Request;self.Response=Response;self.fetch=function(input,init){return new Promise(function(resolve,reject){var request;if(Request.prototype.isPrototypeOf(input)&&!init){request=input}else{request=new Request(input,init)}var xhr=new XMLHttpRequest;function responseURL(){if("responseURL"in xhr){return xhr.responseURL}if(/^X-Request-URL:/m.test(xhr.getAllResponseHeaders())){return xhr.getResponseHeader("X-Request-URL")}return}xhr.onload=function(){var status=xhr.status===1223?204:xhr.status;if(status<100||status>599){reject(new TypeError("Network request failed"));return}var options={status:status,statusText:xhr.statusText,headers:headers(xhr),url:responseURL()};var body="response"in xhr?xhr.response:xhr.responseText;resolve(new Response(body,options))};xhr.onerror=function(){reject(new TypeError("Network request failed"))};xhr.open(request.method,request.url,true);if(request.credentials==="include"){xhr.withCredentials=true}if("responseType"in xhr&&support.blob){xhr.responseType="blob"}request.headers.forEach(function(value,name){xhr.setRequestHeader(name,value)});xhr.send(typeof request._bodyInit==="undefined"?null:request._bodyInit)})};self.fetch.polyfill=true})()},{}],ohmygraph:[function(require,module,exports){(function(){var fetch,jref,querystring;fetch=require("node-fetch");querystring=require("querystring");jref=require("json-ref-lite");module.exports={jref:jref,create:function(graph,opts){var omg;if(graph==null){graph={}}if(opts==null){opts={}}this.jref=jref;this.opts=opts;this.opts.verbose=this.opts.verbose||0;this.opts.dry=this.opts.dry||false;this.opts.requestfunc=typeof fetch==="function"?fetch:function(){return window.fetch.apply(window,arguments)};omg=this;this.onError=function(_this){return function(){console.error("ohmygraph exception: ");return console.dir(arguments)}}(this);this.onWarning=function(err){console.error("ohmygraph warning: ");if(err!=null){return console.log(JSON.stringify(err,null,2))}};this.clone=function(obj){var key,temp;if(obj===null||typeof obj!=="object"||typeof obj==="function"){return obj}temp=obj.constructor();for(key in obj){temp[key]=this.clone(obj[key])}return temp};this.graph=graph;this.get=function(node){if(!this.graph[node]||this.graph[node].properties==null){return this.onError({err:"node "+node+" does not exist"})}return this.graph[node].properties};this.init_events=function(node){node.listeners={};node.on=function(event,cb){if(node.listeners[event]==null){node.listeners[event]=[]}return node.listeners[event].push(cb)};return node.trigger=function(event,data){var handler,i,len,ref,results;if(node.listeners[event]==null){return}if(omg.opts.verbose>0){console.log(node.name+".on "+event+" ("+node.listeners[event].length+" listeners)")}if(node.listeners[event]!=null){ref=node.listeners[event];results=[];for(i=0,len=ref.length;i<len;i++){handler=ref[i];results.push(handler(data))}return results}}};this.init_node=function(nodename,node){node.name=nodename;node.clone=function(){return omg.clone(node)};node.set=function(key,value){return node.data[key]=value};node.populate=function(properties){var results,x,y;if(properties!=null){results=[];for(x in properties){y=properties[x];results.push(node.set(x,y,node))}return results}};node.on=function(event,cb){return omg.graph[node.name].on(event,cb)};node.trigger=function(event,data){return omg.graph[node.name].trigger(event,data)};node.bindrequests=function(node){var methodtype,ref,request,results;if(node.request!=null){node.requestor={};ref=node.request;results=[];for(methodtype in ref){request=ref[methodtype];node.requestor[methodtype]=function(graph,node,request,nodename){return function(properties){var req;if(properties!=null){alert("todo")}if(omg.opts.verbose>2){console.dir(graph[node.name])}req=omg.jref.evaluate(omg.clone(request.config),graph);if(req.method==="get"&&req.payload!=null&&Object.keys(req.payload).length){req.url=req.url+"?"+querystring.stringify(req.payload)}req.url=(omg.opts.baseurl&&!req.url.match(omg.opts.baseurl)?omg.opts.baseurl:"")+req.url;if(omg.opts.verbose>0){console.log(node.name+"."+methodtype+"() "+req.method+" "+req.url)}if(omg.opts.verbose>1){console.dir(req)}opts={method:req.method};if(req.method===!"get"){opts.body=JSON.stringify(req.payload)}if(omg.opts.dry){return}return omg.opts.requestfunc(req.url,opts).then(function(res){return res.json()}).then(function(json){var i,item,len,o,result,schemanode;request.response=json;if(request.data!=null){result=omg.jref.evaluate({_:request.data},{response:request.response})["_"];if(result==null){throw new Error({err:"could not parse '"+request.data+"' from "+nodename+"'s response",response:json})}if(node.type==="array"){node.data=[];schemanode=node.items[0];if(schemanode==null){throw new Error({err:"node '"+nodename+"' has invalid 'items' reference",node:node})}for(i=0,len=result.length;i<len;i++){item=result[i];o=omg.clone(schemanode);omg.init_node(o.name,o);o.data=item;node.data.push(o)}return node.trigger("data",node.data)}else{node.data=result;return node.trigger("data",node)}}})["catch"](omg.onError)}}(graph,node,request,nodename);results.push(node[methodtype]=node.requestor[methodtype])}return results}};return node.bindrequests(node)};this.export_functions=function(return_array_boolean){var k,name,node,obj,ref,ref1,result,str,v;result=[];str="";ref=omg.graph;for(name in ref){node=ref[name];if(node.request!=null){ref1=node.request;for(k in ref1){v=ref1[k];if(v.config!=null){obj={};obj[name]=k;result.push(obj);str+="\n"+name+"."+k+"()"}}}}if(return_array_boolean){return result}else{return str.substr(1,str.length-1)}};this.resolve=function(){return omg.graph=omg.jref.resolve(omg.graph)};this.extend=function(){return omg.jref.extend(omg.graph)};this.init={};this.init.client=function(){var node,nodename,results;omg.extend();omg.resolve();graph=omg.graph;results=[];for(nodename in graph){node=graph[nodename];results.push(function(nodename,node){omg.init_node(nodename,node);return omg.init_events(node)}(nodename,node))}return results};return this}}}).call(this)},{"json-ref-lite":5,"node-fetch":7,querystring:4}]},{},[]);